---
import Logo from './_topbar/_logo.astro'
import { getPathPrefix } from '../../../../../utils/path'
const rawPath = Astro.url.pathname
const currentPath = rawPath.replace(/\.html$/, '') // remove .html if present
---

<!-- Navbar -->
<nav class="navbar sticky-top navbar-expand-lg navbar-light bg-body shadow-sm z-4">
  <div class="container">
    <!-- Brand Logo or Text -->
    <a
      class="navbar-brand d-flex align-items-center"
      href={getPathPrefix('/theme/1/home')}
      data-aos="fade-right"
      data-aos-delay="200"
      data-aos-duration="800"
    >
      <Logo />
    </a>

    <!-- Offcanvas Toggler -->
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="offcanvas"
      data-bs-target="#offcanvasNavbar"
      aria-controls="offcanvasNavbar"
      aria-label="Toggle navigation"
      data-aos="fade-left"
      data-aos-delay="300"
      data-aos-duration="800"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Offcanvas Menu -->
    <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar">
      <div class="offcanvas-header">
        <a class="navbar-brand d-flex align-items-center" href={getPathPrefix('/theme/1/home')}>
          <Logo />
        </a>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"
        ></button>
      </div>
      <div class="offcanvas-body d-flex flex-column justify-content-between h-100">
        <ul
          class="navbar-nav navbar-highlight flex-grow-1 justify-content-center d-none d-lg-flex pe-3"
          data-aos="fade-down"
          data-aos-delay="400"
          data-aos-duration="800"
        >
          <!-- Home -->
          <li class="nav-item">
            <a
              class={`nav-link${currentPath === '/theme/1/home' ? ' active' : ''}`}
              href={getPathPrefix('/theme/1/home')}>Home</a
            >
          </li>

          <!-- About Dropdown -->
          <li class="nav-item dropdown">
            <a
              class="nav-link dropdown-toggle"
              href="#"
              id="aboutDropdown"
              role="button"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              About
            </a>
            <ul class="dropdown-menu" aria-labelledby="aboutDropdown">
              <li>
                <a
                  class={`dropdown-item${currentPath === '/theme/1/about' ? ' active' : ''}`}
                  href={getPathPrefix('/theme/1/about')}>About Us</a
                >
              </li>
              <li>
                <a
                  class={`dropdown-item${currentPath === '/theme/1/amenities' ? ' active' : ''}`}
                  href={getPathPrefix('/theme/1/amenities')}>Amenities</a
                >
              </li>
              <li>
                <a
                  class={`dropdown-item${currentPath === '/theme/1/facilities' ? ' active' : ''}`}
                  href={getPathPrefix('/theme/1/facilities')}>Facilities</a
                >
              </li>
              <li>
                <a
                  class={`dropdown-item${currentPath === '/theme/1/history' ? ' active' : ''}`}
                  href={getPathPrefix('/theme/1/history')}>History</a
                >
              </li>
              <li>
                <a
                  class={`dropdown-item${currentPath === '/theme/1/faq' ? ' active' : ''}`}
                  href={getPathPrefix('/theme/1/faq')}>FAQs</a
                >
              </li>
            </ul>
          </li>

          <!-- Community Dropdown -->
          <li class="nav-item dropdown">
            <a
              class="nav-link dropdown-toggle"
              href="#"
              id="communityDropdown"
              role="button"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              Community
            </a>
            <ul class="dropdown-menu" aria-labelledby="communityDropdown">
              <li>
                <a
                  class={`dropdown-item${currentPath === '/theme/1/board-members' ? ' active' : ''}`}
                  href={getPathPrefix('/theme/1/board-members')}>Board Members</a
                >
              </li>
              <li>
                <a
                  class={`dropdown-item${currentPath === '/theme/1/gallery' ? ' active' : ''}`}
                  href={getPathPrefix('/theme/1/gallery')}>Gallery</a
                >
              </li>
              <li>
                <a
                  class={`dropdown-item${currentPath === '/theme/1/events' ? ' active' : ''}`}
                  href={getPathPrefix('/theme/1/events')}>Events</a
                >
              </li>
              <li>
                <a
                  class={`dropdown-item${currentPath === '/theme/1/news' ? ' active' : ''}`}
                  href={getPathPrefix('/theme/1/news')}>News</a
                >
              </li>
            </ul>
          </li>

          <!-- Blog Dropdown -->
          <li class="nav-item dropdown">
            <a
              class="nav-link dropdown-toggle"
              href="#"
              id="blogDropdown"
              role="button"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              Blog
            </a>
            <ul class="dropdown-menu" aria-labelledby="blogDropdown">
              <li>
                <a
                  class={`dropdown-item${currentPath === '/theme/1/blog-1' ? ' active' : ''}`}
                  href={getPathPrefix('/theme/1/blog-1')}>Blog – No Sidebar</a
                >
              </li>
              <li>
                <a
                  class={`dropdown-item${currentPath === '/theme/1/blog-2' ? ' active' : ''}`}
                  href={getPathPrefix('/theme/1/blog-2')}>Blog – Left Sidebar</a
                >
              </li>
              <li>
                <a
                  class={`dropdown-item${currentPath === '/theme/1/blog-3' ? ' active' : ''}`}
                  href={getPathPrefix('/theme/1/blog-3')}>Blog – Right Sidebar</a
                >
              </li>
              <li>
                <a
                  class={`dropdown-item${currentPath === '/theme/1/post-1' ? ' active' : ''}`}
                  href={getPathPrefix('/theme/1/post-1')}>Blog Post – No Sidebar</a
                >
              </li>
              <li>
                <a
                  class={`dropdown-item${currentPath === '/theme/1/post-2' ? ' active' : ''}`}
                  href={getPathPrefix('/theme/1/post-2')}>Blog Post – Left Sidebar</a
                >
              </li>
              <li>
                <a
                  class={`dropdown-item${currentPath === '/theme/1/post-3' ? ' active' : ''}`}
                  href={getPathPrefix('/theme/1/post-3')}>Blog Post – Right Sidebar</a
                >
              </li>
            </ul>
          </li>
        </ul>

        <ul class="navbar-nav flex-grow-1 pe-3 justify-content-start d-flex d-lg-none">
          <li class="nav-item">
            <a
              class={`nav-link${currentPath === '/theme/1/home' ? ' active' : ''}`}
              href={getPathPrefix('/theme/1/home')}>Home</a
            >
          </li>
          <li class="nav-item">
            <a
              class={`nav-link${currentPath === '/theme/1/about' ? ' active' : ''}`}
              href={getPathPrefix('/theme/1/about')}>About</a
            >
          </li>
          <li class="nav-item">
            <a
              class={`nav-link${currentPath === '/theme/1/amenities' ? ' active' : ''}`}
              href={getPathPrefix('/theme/1/amenities')}>Amenities</a
            >
          </li>
          <li class="nav-item">
            <a
              class={`nav-link${currentPath === '/theme/1/board-members' ? ' active' : ''}`}
              href={getPathPrefix('/theme/1/board-members')}>Board Members</a
            >
          </li>
          <li class="nav-item">
            <a
              class={`nav-link${currentPath === '/theme/1/blog-1' ? ' active' : ''}`}
              href={getPathPrefix('/theme/1/blog-1')}>Blog – 1</a
            >
          </li>
          <li class="nav-item">
            <a
              class={`nav-link${currentPath === '/theme/1/blog-2' ? ' active' : ''}`}
              href={getPathPrefix('/theme/1/blog-2')}>Blog – 2</a
            >
          </li>
          <li class="nav-item">
            <a
              class={`nav-link${currentPath === '/theme/1/blog-3' ? ' active' : ''}`}
              href={getPathPrefix('/theme/1/blog-3')}>Blog – 3</a
            >
          </li>
          <li class="nav-item">
            <a
              class={`nav-link${currentPath === '/theme/1/post-1' ? ' active' : ''}`}
              href={getPathPrefix('/theme/1/post-1')}>Blog Post – 1</a
            >
          </li>
          <li class="nav-item">
            <a
              class={`nav-link${currentPath === '/theme/1/post-2' ? ' active' : ''}`}
              href={getPathPrefix('/theme/1/post-2')}>Blog Post – 2</a
            >
          </li>
          <li class="nav-item">
            <a
              class={`nav-link${currentPath === '/theme/1/post-3' ? ' active' : ''}`}
              href={getPathPrefix('/theme/1/post-3')}>Blog Post – 3</a
            >
          </li>
          <li class="nav-item">
            <a
              class={`nav-link${currentPath === '/theme/1/contact' ? ' active' : ''}`}
              href={getPathPrefix('/theme/1/contact')}>Contact</a
            >
          </li>
          <li class="nav-item">
            <a
              class={`nav-link${currentPath === '/theme/1/events' ? ' active' : ''}`}
              href={getPathPrefix('/theme/1/events')}>Events</a
            >
          </li>
          <li class="nav-item">
            <a
              class={`nav-link${currentPath === '/theme/1/facilities' ? ' active' : ''}`}
              href={getPathPrefix('/theme/1/facilities')}>Facilities</a
            >
          </li>
          <li class="nav-item">
            <a
              class={`nav-link${currentPath === '/theme/1/faq' ? ' active' : ''}`}
              href={getPathPrefix('/theme/1/faq')}>FAQs</a
            >
          </li>
          <li class="nav-item">
            <a
              class={`nav-link${currentPath === '/theme/1/gallery' ? ' active' : ''}`}
              href={getPathPrefix('/theme/1/gallery')}>Gallery</a
            >
          </li>
          <li class="nav-item">
            <a
              class={`nav-link${currentPath === '/theme/1/history' ? ' active' : ''}`}
              href={getPathPrefix('/theme/1/history')}>History</a
            >
          </li>
          <li class="nav-item">
            <a
              class={`nav-link${currentPath === '/theme/1/news' ? ' active' : ''}`}
              href={getPathPrefix('/theme/1/news')}>News</a
            >
          </li>
        </ul>

        <!-- Bottom Section -->
        <div class="d-block d-lg-none mt-4">
          <a href="mailto:hello@email.com" class="btn btn-outline-primary rounded w-100 mb-2">
            <i class="ri-mail-fill me-2"></i>Email Us
          </a>
          <a href="tel:+12345678901" class="btn btn-primary rounded w-100">
            <i class="ri-phone-fill me-2"></i>Call Us
          </a>
        </div>
      </div>
    </div>

    <div
      class="d-none d-lg-flex align-items-center gap-3"
      data-aos="fade-left"
      data-aos-delay="500"
      data-aos-duration="800"
    >
      <div class="text-start">
        <small class="text-muted d-block">Get in Touch</small>
        <a href="mailto:hello@email.com" class="text-decoration-none text-body fw-medium">
          hello@email.com
        </a>
      </div>
      <a href={getPathPrefix('/theme/1/contact')} class="btn btn-lg btn-primary rounded"
        >Contact Us</a
      >
    </div>
  </div>
</nav>
